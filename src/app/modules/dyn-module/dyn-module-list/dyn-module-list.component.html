<span class="icon-chat"><md-icon>chat_bubble_outline</md-icon></span>
<md-card class="table-container mat-elevation-z8" *ngIf="listLoaded && !accordionView">
    <md-table id="equipmentContainer" loadMoreData colWidth #table [dataSource]="dataSource" id="custom-scroll" mdSort (mdSortChange)="sort($event)">
        <ng-container *ngFor="let equipTemp of equipmentMeta" [cdkColumnDef]="equipTemp.fieldId">
            <md-header-cell [id]="equipTemp.id+'_'+equipTemp.order" *cdkHeaderCellDef colWidth [fieldWidth]="equipTemp.width" [alignment]="equipTemp.alignment" dropCol (swapColumns)="colSwap($event)" md-sort-header="{{equipTemp.fieldId}}" [draggable]="true" dragCol>
                <span [id]="equipTemp.id+'_'+equipTemp.order" class="header-cell-label">{{equipTemp.headerLabel}}</span>
                <span class="delete-icon" (click)="deleteColumn(equipTemp, $event)"><md-icon>delete</md-icon></span>
            </md-header-cell>

            <md-cell *cdkCellDef="let row" colWidth [fieldWidth]="equipTemp.width" [alignment]="equipTemp.alignment">
                <span title="{{row[equipTemp.fieldId] |date:'fullDate'}} at {{row[equipTemp.fieldId] |date:'shortTime'}}" class="ovr-flw" *ngIf="equipTemp.dataType=='DATE'">{{ row[equipTemp.fieldId] | dateFormat}}</span>
                <span class="ovr-flw" *ngIf="equipTemp.dataType!='DATE'">{{ row[equipTemp.fieldId]}}</span>
            </md-cell>

        </ng-container>

        <ng-container cdkColumnDef="moreColumn">
            <md-header-cell *cdkHeaderCellDef colWidth [fieldWidth]="moreColWidth" [alignment]="moreColAlign" class="fix">More</md-header-cell>
            <md-cell *cdkCellDef="let row" colWidth [fieldWidth]="moreColWidth" [alignment]="moreColAlign" class="fix"><i  md-tooltip= "{{'Click For Details' | translate}}"  mdTooltipClass="details" class="icofont icofont-open-eye" (click)="moreButton()" [mdMenuTriggerFor]="moreinfo"></i>
                <md-menu #moreinfo="mdMenu" [overlapTrigger]="false" class="more-info-dropdown">
                    <div class="more-info-content">
                        <h3>Equipment Summary:</h3>
                        <div class="img-section">
                            <i class="icofont icofont-vehicle-crane"></i>
                        </div>
                        <ul>
                            <li>- Location</li>
                            <li>- Modified by</li>
                        </ul>
                        <a class="" (click)="moreDetail(row['equipmentNumber'])">{{'More Detail' | translate}}</a>
                    </div>
                </md-menu>
            </md-cell>
        </ng-container>

        <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
        <md-row *cdkRowDef="let row; columns: displayedColumns;"></md-row>
    </md-table>
    <md-paginator #paginator [length]="equipmentList.length" [pageIndex]="0" [pageSize]="5" [pageSizeOptions]="[5, 10, 25, 100]">
    </md-paginator>
</md-card>

<div class="add-col-widget" *ngIf="listLoaded && !accordionView">
    <button [mdMenuTriggerFor]="addcolumn" class="add-col-btn">{{'Add New column'|translate}}</button>
    <md-menu #addcolumn="mdMenu" [overlapTrigger]="false" class="add-col-dropdown">
        <button *ngFor="let moreColumns of addMoreColumns" md-menu-item (click)="addMoreColumn(moreColumns)">{{
      moreColumns.headerLabel }}
    </button>
    </md-menu>
    <ul class="add-col-lines">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>

<div *ngIf="listLoaded && accordionView" class="accordion-widget">
    <app-accordion [header]="equipmentMeta" [accordion]="equipmentList" (moreData)="moreDetail($event)">
    </app-accordion>
</div>